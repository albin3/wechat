<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>非车险报案</title>

<style type="text/css">
@import url("./plugins/bootstrap/css/bootstrap.css");
@import url("./plugins/custom/mobiscroll.custom-2.6.2.min.css");
</style>
<script type="text/javascript" src="./js/lib/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="./plugins/custom/mobiscroll.custom-2.6.2.min.js"></script>

<Script Language="JScript"> 
function checkedThis(obj,cname){ 
        var boxArray = document.getElementsByName(cname); 
        if(boxArray[0]==obj && obj.checked){
                boxArray[0].checked = true;
                document.getElementById("ishuman").style.display="";
                boxArray[1].checked = false;
        } else if (boxArray[1]==obj && obj.checked){
                boxArray[1].checked = true;
                document.getElementById("ishuman").style.display="none";
                boxArray[0].checked = false;
        } else {
                boxArray[0].checked = false;
                boxArray[1].checked = false;
                document.getElementById("ishuman").style.display="none";      
        }
}
</Script> 

<script>
var cityList=[];
cityList.push({code:'021',name:'上海市',carcard:'沪'});

cityList.push({code:'0571',name:'杭州市',carcard:'浙A'});
cityList.push({code:'0574',name:'宁波市',carcard:'浙B'});
cityList.push({code:'0577',name:'温州市',carcard:'浙C'});
cityList.push({code:'0575',name:'绍兴市',carcard:'浙D'});
cityList.push({code:'0572',name:'湖州市',carcard:'浙E'});
cityList.push({code:'0573',name:'嘉兴市',carcard:'浙F'});
cityList.push({code:'0579',name:'金华市',carcard:'浙G'});
cityList.push({code:'0570',name:'衢州市',carcard:'浙H'});
cityList.push({code:'0580',name:'舟山市',carcard:'浙I'});
cityList.push({code:'0576',name:'台州市',carcard:'浙J'});
cityList.push({code:'0578',name:'丽水市',carcard:'浙K'});
$(function () {  
                $("select[name='province']").change(function(){
                        var code=$(this).find("option:selected").attr("code");
                        $("select[name='city'] option:not(:first)").remove();
                        for(var i=0;i<cityList.length;i++){
                        if(cityList[i].code.substr(0,2)==code){
                        $("select[name='city']").append("<option value='"+cityList[i].name+"' card='"+cityList[i].carcard+"'>"+cityList[i].name+"</option>");
                        }
                        }
                        });
                });
</script>

<script>

$(function(){
                var d=new Date();
                var year= d.getFullYear();
                var month=d.getMonth();
                var day=d.getDay();
                var opt = {};  
                opt.datetime = { preset : 'datetime',minDate: new Date(year-1,month,1,0,0), maxDate: new Date(),stepMinute: 5  ,height: 30, showLabel: 1};
                $('#thetime').val('').scroller('destroy').scroller($.extend(opt['datetime'],
                                { theme: 'android', mode:'scroller', display: 'bottom', lang: 'zh',dateFormat:'yyyy-mm-dd',dateOrder:'yyyymmdd' }));

                $('#thetime').click(function(){
                        $('#thetime').mobiscroll('show'); 
                        return false;
                        }); 
                });

</script>

</head>

<body>

<div id="repoterpage">    

<div class="panel panel-primary">
<div class="panel-heading" align="center"> <font size="+2">自助报案 </font></div>
</div>

<div class="modal-body">

<div class="container">
<div class="row">
<label >承保地:</label>
<select name="province" id="province" style="margin-left:27px; width:60pt">
<option value="">选择省</option>
<option value="上海" code="02">上海市</option>
<option value="浙江" code="05">浙江省</option>
</select>
<select name="city" id="city" style="margin-left:8px;width:60pt" >
<option value="">选择市</option>
</select>
</div>
<span id="areaspan"></span>
</div>

<div class="container" style=" padding-top:5px">
<div class="row">
<label for="policy">保单号:</label>
<input id="policy" name="policy" style=" margin-left:27px">
</div>
<span id="policyspan"></span>
</div>

<div class="container" style=" padding-top:5px">
<div class="row">
<label>出险险种:</label>
<label for="human" style=" margin-left:20px">人意险</label>
<input type="checkbox" id="human" name="intype" value="human" onclick="checkedThis(this,'intype');">
<label for="nohuman" style=" margin-left:15px">非人意险</label>
<input type="checkbox" id="nohuman" name="intype" value="nohuman" onclick="checkedThis(this,'intype');">
</div>
<span id="typespan"></span>
</div>


<div id="ishuman" style="display: none" onMouseout="hidden()">

<div class="container" style=" padding-top:5px">
<div class="row">
<label for="thename">出险人姓名:</label>
<input id="thename" name="thename" >
</div>
<span id="namespan"></span>
</div>

<div class="container" style=" padding-top:5px">
<div class="row">
<label for="cardid">证件号:</label>
<input id="cardid" name="cardid" placeholder="投保登记的出险人证件号码" style=" margin-left:28px">
</div>
<span id="cardspan"></span>
</div>

</div>

<div class="container" style=" padding-top:5px">
<div class="row">
<label for="thetime">出险时间:</label>
<input id="thetime" name="thetime" style=" margin-left:13px">
</div>
<span id="timespan"></span>
</div>

<div class="container" style=" padding-top:5px">
<div class="row">
<label for="theplace">出险人地点:</label>
<input id="theplace" name="theplace" placeholder="（市+区+路名）或（道路1+道路2交叉）" size="30">
</div>
<span id="placespan"></span>
</div>


<div class="container" style=" padding-top:5px">
<div class="row">
<label for="contact">报案联系人:</label>
<input id="contact" name="contact" >
</div>
<span id="contactspan"></span>
</div>

<div class="container" style=" padding-top:5px">
<div class="row">
<label for="telephone">报案电话:</label>
<input id="telephone" name="telephone" style=" margin-left:13px">
</div>
<span id="phonespan"></span>
</div>

<div class="container" style=" padding-top:5px">
<div class="row">
<label>出险经过:</label>
</div>
</div>

<div class="container" >
<div class="row">
<textarea id="description" name="description"  style=" margin-left:76px" rows="3"  cols="23" placeholder="请简述出险经过"></textarea>
</div>
</div>

<div class="container" style=" padding-top:5px" >
<div class="row">
<p>温馨提示：</p>
<p>报案成功之后，我们会派出专业理赔员与您联系处理，请保持手机畅通！如果查勘员认为需回勘现场，请您配合。
</p>
</div>
</div>

</div>

<div class="modal-footer">
<button type="button" class="btn btn-primary" style="width:100%" onclick="checksub()" > <font size="+1">提交</font></button>
</div>

</div>

<div id="Confirmations" style="display: none;">

<div class="panel panel-primary">
<div class="panel-heading" align="center"> <font size="+2">自助报案信息确认 </font></div>
</div>

<div class="modal-body">
<div class="container">

<p><label>承保地：</label><span id="conarae"></span></p>
<p><label>保单号：</label><span id="conply"></span></p>
<p><label>出险险种：</label><span id="contyp"></span></p>
<div id="typhum" style="display: none;">
<p><label>出险人姓名：</label><span id="coname"></span></p>
<p><label>证件号：</label><span id="concar"></span></p>
</div>
<p><label>出险时间：</label><span id="contme"></span></p>
<p><label>出险人地点：</label><span id="conplc"></span></p>
<p><label>报案联系人：</label><span id="concon"></span></p>
<p><label>报案电话：</label><span id="contel"></span></p>
<div id="desc" style="display: none;">
<p><label>出险经过：</label><span id="condes"></span></p>
</div>

</div>
</div>

<div class="modal-footer">
<button type="button" class="btn btn-default" onclick="canback()" > 修改</button>
<button type="button" class="btn btn-primary" type="submit" > 确认</button>
</div>
</div>

<script type="text/javascript">

function phoneTest(phone){
        var pattern=/^0?(13[0-9]|15[012356789]|18[0-9]|14[57])[0-9]{8}$/;
        return pattern.test(phone);
}

function checkForm(){

        var pro=document.getElementById("province");
        var cty=document.getElementById("city");
        var ply=document.getElementById("policy");
        var noh=document.getElementById("nohuman");
        var boxArray = document.getElementsByName("intype");
        var tname=document.getElementById("thename");
        var crd=document.getElementById("cardid");
        var thime=document.getElementById("thetime");
        var tplace=document.getElementById("theplace");
        var ctc=document.getElementById("contact");
        var tel=document.getElementById("telephone");     

        var areasp=document.getElementById("areaspan"); 
        var plysp=document.getElementById("policyspan");
        var tysp=document.getElementById("typespan");
        var namesp=document.getElementById("namespan");
        var cardsp=document.getElementById("cardspan");
        var timesp=document.getElementById("timespan");
        var placesp=document.getElementById("placespan");
        var ctcsp=document.getElementById("contactspan");
        var telsp=document.getElementById("phonespan");


        areasp.innerText="";
        plysp.innerText="";
        tysp.innerText="";
        namesp.innerText="";
        cardsp.innerText="";
        timesp.innerText="";
        placesp.innerText="";
        ctcsp.innerText="";
        telsp.innerText="";

        var v=true;

        if(pro.value == ""){
                areasp.style.color='red';
                areasp.innerText='请正确选择承保地';
                if(v){
                        pro.focus();
                }
                v=false;
        } 
        if(cty.value == ""){
                areasp.style.color='red';
                areasp.innerText='请正确选择承保地';
                if(v){
                        cty.focus();
                }
                v=false;
        }

        if(ply.value == ""){
                plysp.style.color='red';
                plysp.innerText='请输入保单号';
                if(v){
                        ply.focus();
                }
                v=false;
        }
        if(!(boxArray[0].checked)){
                if(!(boxArray[1].checked)){
                        tysp.style.color='red';
                        tysp.innerText='请选择出险险种';
                        v=false;
                }
        } else {
                if(!(boxArray[1].checked)){
                        if(tname.value == ""){
                                namesp.style.color='red';
                                namesp.innerText='请输入出险人姓名';
                                if(v){
                                        tname.focus();
                                }
                                v=false;
                        }
                        if(crd.value == ""){
                                cardsp.style.color='red';
                                cardsp.innerText='请输入出险人证件号';
                                if(v){
                                        crd.focus();
                                }
                                v=false;
                        } 
                } else noh.click();
        }

        if(thime.value == ""){
                timesp.style.color='red';
                timesp.innerText='请输入出险时间';
                if(v){
                        thime.focus();
                }
                v=false;
        }
        if(tplace.value == ""){
                placesp.style.color='red';
                placesp.innerText='请输入出险人所在地点';
                if(v){
                        tplace.focus();
                }
                v=false;
        }
        if(ctc.value == ""){
                ctcsp.style.color='red';
                ctcsp.innerText='请输入报案联系人';
                if(v){
                        ctc.focus();
                }
                v=false;
        }
        if(!phoneTest(tel.value)){
                telsp.style.color='red';
                telsp.innerText='手机号码必须正确填写';
                if(v){
                        tel.focus();
                }
                v=false;
        } 
        return v;
}

function checksub(){
        if(checkForm()){
                var boxArray = document.getElementsByName("intype");

                $("#repoterpage").hide();  
                $("#Confirmations").show();


                $("#conarea").text($("#province").val()+"/"+$("#city").val());
                $("#conply").text($("#policy").val()); 
                $("#contme").text($("#thetime").val());
                $("#conplc").text($("#theplace").val());
                $("#concon").text($("#contact").val());
                $("#contel").text($("#telephone").val());

                if(boxArray[0].checked){
                        $("#contyp").text("人意险");  
                        $("#coname").text($("#thename").val());
                        $("#concar").text($("#cardid").val());
                        $("#typhum").show();

                } else {
                        $("#contyp").text("非人意险");  
                        $("#typhum").hide();
                }

                if($("#description").val()){
                        $("#condes").text($("#description").val());
                        $("#desc").show();
                } else $("#desc").hide();

        }
}

function canback(){
        $("#Confirmations").hide();
        $("#repoterpage").show();
}

</script>
</body>
</html>

